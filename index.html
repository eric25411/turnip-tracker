<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Turnip Tracker</title>

  <!-- App icon (iOS home screen and browser tab) -->
  <link rel="apple-touch-icon" href="icon-1024.png.PNG">
  <link rel="icon" type="image/png" href="icon-1024.png.PNG">

  <!-- Optional PWA basics -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#e8f0ff">

  <!-- Cache bust -->
  <link rel="stylesheet" href="style.css?v=40" />
</head>

<body>
  <div class="app">

    <!-- HEADER -->
    <div class="header">
      <img
        src="banner.png.jpg"
        alt="Turnip Tracker"
        class="headerImage"
        onerror="this.style.display='none'; document.getElementById('headerFallback').style.display='block';"
      />
      <div id="headerFallback" class="headerFallback">
        Turnip Tracker
      </div>
    </div>

    <!-- MAIN -->
    <main id="mainView">

      <!-- ENTRY VIEW -->
      <section id="entryView" class="view">

        <!-- Buy price card -->
        <div class="card buyCard">
          <div class="buyLeft">
            <div class="buyTitleRow">
              <span class="buyEmoji">ğŸ’°</span>
              <div class="buyTitles">
                <div class="buyTitle">Buy price</div>
                <div class="buySub" id="buySub">Daisy Mae, Sunday</div>
              </div>
            </div>
          </div>

          <div class="buyRight">
            <input
              id="buy-price"
              class="buyInput"
              inputmode="numeric"
              placeholder="-"
              aria-label="Turnip buy price"
            />
          </div>
        </div>

        <!-- Days -->
        <section class="days">

          <div class="dayCard">
            <h2 class="dayTitle">Monday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="mon-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="mon-pm" />
            </div>
          </div>

          <div class="dayCard">
            <h2 class="dayTitle">Tuesday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="tue-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="tue-pm" />
            </div>
          </div>

          <div class="dayCard">
            <h2 class="dayTitle">Wednesday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="wed-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="wed-pm" />
            </div>
          </div>

          <div class="dayCard">
            <h2 class="dayTitle">Thursday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="thu-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="thu-pm" />
            </div>
          </div>

          <div class="dayCard">
            <h2 class="dayTitle">Friday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="fri-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="fri-pm" />
            </div>
          </div>

          <div class="dayCard">
            <h2 class="dayTitle">Saturday</h2>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ</span><span>AM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="sat-am" />
            </div>
            <div class="row">
              <div class="label"><span class="emoji">ğŸŒ™</span><span>PM</span></div>
              <input class="priceInput" inputmode="numeric" placeholder="-" id="sat-pm" />
            </div>
          </div>

        </section>

        <!-- Save button at bottom of days -->
        <div class="saveWrap">
          <button id="saveWeekBtn" class="primaryBtn">Save week to History</button>
          <div class="saveHint">Saves the week and clears your Entry screen.</div>
        </div>

      </section>

      <!-- PREDICT VIEW -->
      <section id="predictView" class="view hidden">

        <div class="card">
          <div class="predictHeader">
            <div class="predictTitle">Predictor</div>
          </div>

          <!-- Postcard -->
          <div class="postcard">
            <div class="postcardTop">
              <div class="postcardLabel">This weekâ€™s bell postcard</div>

              <div class="postcardKey">
                <div class="keyRow"><span class="keyIcon">ğŸŒ</span><span class="keyText">AM</span></div>
                <div class="keyRow"><span class="keyIcon">ğŸŒ™</span><span class="keyText">PM</span></div>
              </div>
            </div>

            <div class="chartWrap">
              <div class="chartBgTurnip" aria-hidden="true"></div>
              <svg id="chartSvg" class="chartSvg" viewBox="0 0 320 140" preserveAspectRatio="none" aria-label="Turnip price postcard chart">
                <rect x="0" y="0" width="320" height="140" rx="14" ry="14" class="chartFrame"></rect>

                <!-- grid lines -->
                <line x1="16" y1="28" x2="304" y2="28" class="chartGrid"></line>
                <line x1="16" y1="56" x2="304" y2="56" class="chartGrid"></line>
                <line x1="16" y1="84" x2="304" y2="84" class="chartGrid"></line>
                <line x1="16" y1="112" x2="304" y2="112" class="chartGrid"></line>

                <!-- path -->
                <path id="chartPath" d="" class="chartPath"></path>

                <!-- points group -->
                <g id="chartPoints"></g>

                <!-- x labels -->
                <g class="chartLabels">
                  <text x="26"  y="134">Mon</text>
                  <text x="74"  y="134">Tue</text>
                  <text x="122" y="134">Wed</text>
                  <text x="170" y="134">Thu</text>
                  <text x="218" y="134">Fri</text>
                  <text x="266" y="134">Sat</text>
                </g>
              </svg>
            </div>

            <div class="postcardNote">
              Just a cozy snapshot. The more you log, the smarter it gets.
            </div>
          </div>

          <!-- Stats -->
          <div class="statsCard">
            <div class="statRow">
              <div class="statLabel">Daisy Mae buy price</div>
              <div class="statValue" id="statBuy">-</div>
            </div>
            <div class="statRow">
              <div class="statLabel">Best price seen</div>
              <div class="statValue" id="statBest">-</div>
            </div>
            <div class="statRow">
              <div class="statLabel">Best time so far</div>
              <div class="statValue" id="statBestTime">-</div>
            </div>
            <div class="statRow">
              <div class="statLabel">Profit vs buy</div>
              <div class="statValue" id="statProfit">-</div>
            </div>
            <div class="statRow">
              <div class="statLabel">Likely pattern</div>
              <div class="statValue" id="statPattern">Mixed</div>
            </div>
          </div>

          <!-- History inside Predict -->
          <div class="historyCard">
            <div class="historyTop">
              <div>
                <div class="historyTitle">Past weeks</div>
                <div class="historyHint">Tap Expand to peek, Load to edit an old week.</div>
              </div>

              <div class="historyActions">
                <button id="exportBtn" class="chipBtn" type="button">Export</button>
                <label class="chipBtn fileBtn">
                  Import
                  <input id="importFile" type="file" accept="application/json" />
                </label>
              </div>
            </div>

            <p class="historySmall" id="historyEmptyNote">
              No saved weeks yet. Fill your week, then hit Save week.
            </p>

            <div id="historyList" class="historyList"></div>
          </div>

        </div>

      </section>

    </main>
  </div>

  <!-- BOTTOM NAV -->
  <nav class="bottomNav" role="navigation" aria-label="Bottom navigation">
    <button id="navEntry" class="navBtn active" type="button">
      <span class="navIcon">ğŸ§¾</span>
      <span class="navText">Entry</span>
    </button>

    <button id="navPredict" class="navBtn" type="button">
      <span class="navIcon">ğŸ”®</span>
      <span class="navText">Predict</span>
    </button>

    <button id="navHistory" class="navBtn" type="button">
      <span class="navIcon">ğŸ•°ï¸</span>
      <span class="navText">History</span>
    </button>
  </nav>

  <script src="app.js?v=40"></script>
</body>
</html>
